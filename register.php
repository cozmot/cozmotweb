<?php 
include 'core/init.php';
logged_in_redirect();
?><!DOCTYPE html><html class=no-js lang=en><!--<![endif]--><?php include 'includes/headtoheaderenter.php'; ?><?php include_once("includes/googleanalyticstracking.php") ?><section><div id=container_demo><a class=hiddenanchor id=toregister></a> <a class=hiddenanchor id=tologin></a><div id=wrapper><div class="animate form"id=login><form action=""autocomplete=on method=post><h1>Sign up</h1><?php
if (empty($_POST) === false) {
	$required_fields = array('username', 'password', 'password_again', 'first_name', 'email');
	foreach($_POST as $key=>$value) {
		if (empty($value) && in_array($key, $required_fields) === true) {
			$errors[] = 'Hello! The fields marked with an asterisk are required';
			break 1;
		}
	}
	if (empty($errors) === true) {
		if (user_exists($_POST['username']) === true) {
			$errors[] = 'Sorry, that username \'' . $_POST['username'] . '\' is already taken.';
		}
		if (preg_match("/\\s/", $_POST['username']) === true) {
			$errors[] = 'Your username must not contain any spaces.';
		}
		if (strlen($_POST['username']) > 10) {
			$errors[] = 'Your username must contain not more than 10 characters';
		}
		if (strlen($_POST['password']) < 6) {
			$errors[] = 'Your password must be at least 6 characters';
		}
		if ($_POST['password'] !== $_POST['password_again']) {
			$errors[] = 'Your passwords do not match';
		}
		if (filter_var($_POST['email'], FILTER_VALIDATE_EMAIL) === false) {
			$errors[] = 'A valid email is required';
		}
		if (email_exists($_POST['email']) === true) {
			$errors[] = 'Sorry, the email \'' . $_POST['email'] . '\' is already in use.';
		}
	}
}
if (isset($_GET['success']) === true && empty($_GET['success']) === true) {
	?><p class=textmode><?php echo 'Yov\'ve been registered successfully! Please check your email to activate your account'; ?></p><?php
} else {
	if (empty($_POST) === false && empty($errors) === true) {
		// register user
		$register_data = array(
			'username' 		=> $_POST['username'],
			'password' 		=> $_POST['password'],
			'first_name' 	=> $_POST['first_name'],
			'last_name' 	=> $_POST['last_name'],
			'email' 		=> $_POST['email'],
			'country' 		=> $_POST['country'],
			'phonenumber' 	=> $_POST['phonenumber'],
			'sex' 			=> $_POST['sex'],
			'email_code' 	=> md5($_POST['username'] + microtime())
		);
		register_user($register_data);
		// redirect
		echo '<meta http-equiv="refresh" content="0; URL=register?success">';
		exit();
		// exit
	} else if (empty($errors) === false) {
		// output errors
		echo output_errors($errors);
	}
?><style>.alert{padding:20px;background-color:#2b86ec;color:#fff}.closebtn{margin-left:15px;color:#fff;font-weight:700;float:right;font-size:22px;line-height:20px;cursor:pointer;transition:.3s}.closebtn:hover{color:#000}</style><div class=alert style=marigin-bottom:50px><span class=closebtn onclick='this.parentElement.style.display="none"'>Ã—</span><h2 style=text-align:center;font-size:24px;padding-bottom:10px><strong>Registration Tips!</strong></h2><ul style=list-style-type:disc;padding-left:20px><li>Username must not exceed 10 Characters!<li style=margin-top:10px;margin-bottom:10px>Password must not exceed 8 Characters!<li style=margin-top:10px;margin-bottom:10px>First Name and Last Name must not exceed 32 Characters each!<li>Please use an active E-mail address and Phone Number in-order to activate your account after registration!</ul></div><p style=padding-top:10px><label class=uname for=username data-icon=u>Your username</label><input value="<?php if(empty($errors) === false) echo $_POST['username']; ?>"id=username maxlength=10 name=username placeholder=Username required><p><label class=uname for=first_name data-icon=fn>Your first name</label><input value="<?php if(empty($errors) === false) echo $_POST['first_name']; ?>"id=first_name maxlength=32 name=first_name placeholder="First Name"required><p><label class=uname for=last_name data-icon=ln>Your last name</label><input value="<?php if(empty($errors) === false) echo $_POST['last_name']; ?>"id=last_name maxlength=32 name=last_name placeholder=Surname><p><label class=youmail for=email datamail-icon=e>Your email address</label><input value="<?php if(empty($errors) === false) echo $_POST['email']; ?>"id=email maxlength=255 name=email placeholder="Email Address"required type=email><div class=sminputs><div class="full input"><p><label class=youpasswd for=password data-icon=p>Your password</label><input value="<?php if(empty($errors) === false) echo $_POST['password']; ?>"id=password maxlength=8 name=password placeholder="eg. X8df!90EO"required type=password> <span class=hide-password onclick='"text"==password.type?password.type="password":password.type="text"'id=eye type=button><img alt="See" src=images/eye.png style=width:25px;height:25px;padding-top:5px></span></div></div><div class=sminputs><div class="full input"><p><label class=youpasswd for=password_again data-icon=p>Please confirm your password</label><input value="<?php if(empty($errors) === false) echo $_POST['password']; ?>"id=password_again maxlength=8 name=password_again placeholder="eg. X8df!90EO"required type=password> <span class=hide-password onclick='"text"==password_again.type?password_again.type="password":password_again.type="text"'id=eye type=button><img alt="See" src=images/eye.png style=width:25px;height:25px;padding-top:5px></span></div></div><p><label class=sex for=sex>Choose your Gender</label>     <select id=sex name=sex style="border:1px solid rgba(91,90,90,.7);border-radius:5px;box-shadow:0 1px 4px 0 rgba(168,168,168,.6) inset;height:30px"><option value=Unspecified selected><?php if(empty($errors) === false) { echo $_POST['sex']; } else { echo 'Unspecified';} ?><option value=Male>Male<option value=Female>Female</select><p><label class=country for=country>Select Country of Origin</label>     <select id=country name=country style="border:1px solid rgba(91,90,90,.7);border-radius:5px;box-shadow:0 1px 4px 0 rgba(168,168,168,.6) inset;height:30px"><option value=Unspecified selected><?php if(empty($errors) === false) { echo $_POST['country']; } else { echo 'Unspecified';} ?><option value=Afghanistan>Afghanistan<option value=Albania>Albania<option value=Algeria>Algeria<option value=Andorra>Andorra<option value=Angola>Angola<option value="Antigua & Deps">Antigua & Deps<option value=Argentina>Argentina<option value=Armenia>Armenia<option value=Australia>Australia<option value=Austria>Austria<option value=Azerbaijan>Azerbaijan<option value=Bahamas>Bahamas<option value=Bahrain>Bahrain<option value=Bangladesh>Bangladesh<option value=Barbados>Barbados<option value=Belarus>Belarus<option value=Belgium>Belgium<option value=Belize>Belize<option value=Benin>Benin<option value=Bermuda>Bermuda<option value=Bhutan>Bhutan<option value=Bolivia>Bolivia<option value="Bosnia Herzegovina">Bosnia Herzegovina<option value=Botswana>Botswana<option value=Brazil>Brazil<option value=Brunei>Brunei<option value=Bulgaria>Bulgaria<option value=Burkina>Burkina<option value=Burundi>Burundi<option value=Cambodia>Cambodia<option value=Cameroon>Cameroon<option value=Canada>Canada<option value="Cape Verde">Cape Verde<option value="Central African Rep">Central African Rep<option value=Chad>Chad<option value=Chile>Chile<option value=China>China<option value=Colombia>Colombia<option value=Comoros>Comoros<option value=Congo>Congo<option value="Congo (Democratic Rep)">Congo (Democratic Rep)<option value="Costa Rica">Costa Rica<option value="Ivory Coast">Ivory Coast<option value=Croatia>Croatia<option value=Cuba>Cuba<option value=Cyprus>Cyprus<option value="Czech Republic">Czech Republic<option value=Denmark>Denmark<option value=Djibouti>Djibouti<option value=Dominica>Dominica<option value="Dominican Republic">Dominican Republic<option value=Ecuador>Ecuador<option value=Egypt>Egypt<option value="El Salvador">El Salvador<option value="Equatorial Guinea">Equatorial Guinea<option value=Eritrea>Eritrea<option value=Estonia>Estonia<option value=Ethiopia>Ethiopia<option value=Fiji>Fiji<option value=Finland>Finland<option value=France>France<option value=Gabon>Gabon<option value=Gambia>Gambia<option value=Georgia>Georgia<option value=Germany>Germany<option value=Ghana>Ghana<option value=Greece>Greece<option value=Greenland>Greenland<option value=Grenada>Grenada<option value=Guatemala>Guatemala<option value=Guinea>Guinea<option value=Guinea-Bissau>Guinea-Bissau<option value=Guyana>Guyana<option value="Hong Kong">Hong Kong<option value=Haiti>Haiti<option value="Vatican City">Vatican City<option value=Honduras>Honduras<option value=Hungary>Hungary<option value=Iceland>Iceland<option value=India>India<option value=Indonesia>Indonesia<option value=Iran>Iran<option value=Iraq>Iraq<option value="Ireland (Republic)">Ireland (Republic)<option value=Israel>Israel<option value=Italy>Italy<option value=Jamaica>Jamaica<option value=Japan>Japan<option value=Jordan>Jordan<option value=Kazakhstan>Kazakhstan<option value=Kenya>Kenya<option value=Kiribati>Kiribati<option value="Korea North">Korea North<option value="South Korea">South Korea<option value=Kosovo>Kosovo<option value=Kuwait>Kuwait<option value=Kyrgyzstan>Kyrgyzstan<option value=Laos>Laos<option value=Latvia>Latvia<option value=Lebanon>Lebanon<option value=Lesotho>Lesotho<option value=Liberia>Liberia<option value=Libya>Libya<option value=Liechtenstein>Liechtenstein<option value=Lithuania>Lithuania<option value=Luxembourg>Luxembourg<option value=Macedonia>Macedonia<option value=Madagascar>Madagascar<option value=Malawi>Malawi<option value=Malaysia>Malaysia<option value=Maldives>Maldives<option value=Mali>Mali<option value=Malta>Malta<option value="Marshall Islands">Marshall Islands<option value=Mauritania>Mauritania<option value=Mauritius>Mauritius<option value=Mexico>Mexico<option value=Micronesia>Micronesia<option value=Moldova>Moldova<option value=Monaco>Monaco<option value=Mongolia>Mongolia<option value=Montenegro>Montenegro<option value=Morocco>Morocco<option value=Mozambique>Mozambique<option value="Myanmar, Burma">Myanmar, Burma<option value=Namibia>Namibia<option value=Nauru>Nauru<option value=Nepal>Nepal<option value=Netherlands>Netherlands<option value="Netherlands Antilles">Netherlands Antilles<option value="New Zealand">New Zealand<option value=Nicaragua>Nicaragua<option value=Niger>Niger<option value=Nigeria>Nigeria<option value=Norway>Norway<option value=Oman>Oman<option value=Pakistan>Pakistan<option value=Palau>Palau<option value="West Bank / Palestinian Territory">West Bank / Palestinian Territory<option value=Panama>Panama<option value="Papua New Guinea">Papua New Guinea<option value=Paraguay>Paraguay<option value=Peru>Peru<option value=Philippines>Philippines<option value=Pitcairn>Pitcairn<option value=Poland>Poland<option value=Portugal>Portugal<option value="Puerto Rico">Puerto Rico<option value=Qatar>Qatar<option value=Romania>Romania<option value="Russian Federation">Russian Federation<option value=Rwanda>Rwanda<option value="St Kitts & Nevis">St Kitts & Nevis<option value="St Lucia">St Lucia<option value="Saint Martin">Saint Martin<option value=Samoa>Samoa<option value="San Marino">San Marino<option value="Sao Tome & Principe">Sao Tome & Principe<option value="Saudi Arabia">Saudi Arabia<option value=Senegal>Senegal<option value=Serbia>Serbia<option value=Seychelles>Seychelles<option value="Sierra Leone">Sierra Leone<option value=Singapore>Singapore<option value=Slovakia>Slovakia<option value=Slovenia>Slovenia<option value="Solomon Islands">Solomon Islands<option value=Somalia>Somalia<option value="South Africa">South Africa<option value=Spain>Spain<option value="Sri Lanka">Sri Lanka<option value=Sudan>Sudan<option value="South Sudan">South Sudan<option value=Suriname>Suriname<option value=Swaziland>Swaziland<option value=Sweden>Sweden<option value=Switzerland>Switzerland<option value=Syria>Syria<option value=Taiwan>Taiwan<option value=Tajikistan>Tajikistan<option value=Tanzania>Tanzania<option value=Thailand>Thailand<option value="East Timor">East Timor<option value=Togo>Togo<option value=Tonga>Tonga<option value="Trinidad & Tobago">Trinidad & Tobago<option value=Tunisia>Tunisia<option value=Turkey>Turkey<option value=Turkmenistan>Turkmenistan<option value=Tuvalu>Tuvalu<option value=Uganda>Uganda<option value=Ukraine>Ukraine<option value="United Arab Emirates">United Arab Emirates<option value="United Kingdom">United Kingdom<option value="United States">United States<option value=Uruguay>Uruguay<option value=Uzbekistan>Uzbekistan<option value=Vanuatu>Vanuatu<option value=Venezuela>Venezuela<option value=Vietnam>Vietnam<option value=Yemen>Yemen<option value=Zambia>Zambia<option value=Zimbabwe>Zimbabwe</select><p><label class=youpasswd for=phonenumber datas-icon=fa-phone>Phone Number</label><input value="<?php if(empty($errors) === false) echo $_POST['phonenumber']; ?>"id=phonenumber maxlength=15 name=phonenumber placeholder="Please enter Phone Number with Country code"><p class="button signin"><input value="Sign up"type=submit><p class=change_link>Already a member ? <a class=to_register href=login>Go and log in</a></form></div></div></div></section><?php 
}
?>