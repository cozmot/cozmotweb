<?php
include 'core/init.php';
protect_page();
	function email_existing($email) {
}
if (empty($_POST) === false) {
	$required_fields = array('first_name', 'email');
	foreach($_POST as $key=>$value) {
		if (empty($value) && in_array($key, $required_fields) === true) {
			$errors[] = 'Hello! The fields marked with an asterisk are required';
			break 1;
		}
	}
	if (empty($errors) === true) {
		if (filter_var($_POST['email'], FILTER_VALIDATE_EMAIL) === false) {
			$errors[] = 'A valid email address is required';
		} else if (email_existing($_POST['email']) === true) {
			$errors[] = 'Sorry, the email \'' . $_POST['email'] . '\' is already in use.';
		}
	}
}
?><!DOCTYPE html><html class=no-js lang=en><!--<![endif]--><meta charset=UTF-8><title>Gigabyte Developers | Update Profile</title><meta content="width=device-width,initial-scale=1"name=viewport><meta content="Login and Registration Form with HTML5 and CSS3"name=description><meta content="html5, css3, form, switch, animation, :target, pseudo-class"name=keywords><meta content="Gigabyte Developers Incorporated"name=author><meta content=#028fcc name=theme-color><link href=images/gigaicon.ico rel="shortcut icon"><link href=css/demo.css rel=stylesheet><link href=css/style3.css rel=stylesheet><?php include_once("includes/googleanalyticstracking.php") ?><div class=container><header><a href=index><h1>Gigabyte Developers <span>Edit Profile</h1></a></header><section><div id=container_demo><a class=hiddenanchor id=toregister></a> <a class=hiddenanchor id=tologin></a><div id=wrapper><div id=login class="animate form"><h1>Update Profile</h1><?php
if (isset($_GET['success']) === true && empty($_GET['success']) === true) {
	?><p class=textmode><?php echo 'Your details has been successfully updated';?></p><?php
} else {
	if (empty($_POST) === false && empty ($errors) === true) {
		// update user details
		$update_data = array(
			'first_name' 	=> $_POST['first_name'],
			'last_name' 	=> $_POST['last_name'],
			'email' 		=> $_POST['email'],
			'allow_email'	=> ($_POST['allow_email'] == 'on') ? 1 : 0,
			'country' 		=> $_POST['country'],
			'phonenumber' 	=> $_POST['phonenumber'],
			'sex' 			=> $_POST['sex']
		);
		update_user($session_user_id, $update_data);
		echo '<meta http-equiv="refresh" content="0; URL=settings?success">';
		exit();
	} else if (empty($errors) === false) {
		echo output_errors($errors);
	}
	?><form action=""method=post><p><label class=youpasswd for=first_name data-icon=u>First Name</label><input name=first_name type="name" placeholder="Enter your Firstname"value="<?php echo $user_data['first_name']; ?>"required><p><p><label class=youpasswd for=last_name data-icon=u>Last Name</label><input name=last_name type="name" placeholder="Enter your Surname/Lastname"value="<?php echo $user_data['last_name']; ?>"><p><label class=youpasswd for=email datamail-icon=e>Email</label><input name=email type="email" placeholder="Enter your email address"value="<?php echo $user_data['email']; ?>"required></p><br><p><label class=country for=country>Add/Change your Country</label>     <select id=country name=country style="border:1px solid rgba(91,90,90,.7);border-radius:5px;box-shadow:0 1px 4px 0 rgba(168,168,168,.6) inset;height:30px"><option value=""selected><?php echo $user_data['country']; ?><option value=Afghanistan>Afghanistan<option value=Albania>Albania<option value=Algeria>Algeria<option value=Andorra>Andorra<option value=Angola>Angola<option value="Antigua & Deps">Antigua & Deps<option value=Argentina>Argentina<option value=Armenia>Armenia<option value=Australia>Australia<option value=Austria>Austria<option value=Azerbaijan>Azerbaijan<option value=Bahamas>Bahamas<option value=Bahrain>Bahrain<option value=Bangladesh>Bangladesh<option value=Barbados>Barbados<option value=Belarus>Belarus<option value=Belgium>Belgium<option value=Belize>Belize<option value=Benin>Benin<option value=Bermuda>Bermuda<option value=Bhutan>Bhutan<option value=Bolivia>Bolivia<option value="Bosnia Herzegovina">Bosnia Herzegovina<option value=Botswana>Botswana<option value=Brazil>Brazil<option value=Brunei>Brunei<option value=Bulgaria>Bulgaria<option value=Burkina>Burkina<option value=Burundi>Burundi<option value=Cambodia>Cambodia<option value=Cameroon>Cameroon<option value=Canada>Canada<option value="Cape Verde">Cape Verde<option value="Central African Rep">Central African Rep<option value=Chad>Chad<option value=Chile>Chile<option value=China>China<option value=Colombia>Colombia<option value=Comoros>Comoros<option value=Congo>Congo<option value="Congo (Democratic Rep)">Congo (Democratic Rep)<option value="Costa Rica">Costa Rica<option value="Ivory Coast">Ivory Coast<option value=Croatia>Croatia<option value=Cuba>Cuba<option value=Cyprus>Cyprus<option value="Czech Republic">Czech Republic<option value=Denmark>Denmark<option value=Djibouti>Djibouti<option value=Dominica>Dominica<option value="Dominican Republic">Dominican Republic<option value=Ecuador>Ecuador<option value=Egypt>Egypt<option value="El Salvador">El Salvador<option value="Equatorial Guinea">Equatorial Guinea<option value=Eritrea>Eritrea<option value=Estonia>Estonia<option value=Ethiopia>Ethiopia<option value=Fiji>Fiji<option value=Finland>Finland<option value=France>France<option value=Gabon>Gabon<option value=Gambia>Gambia<option value=Georgia>Georgia<option value=Germany>Germany<option value=Ghana>Ghana<option value=Greece>Greece<option value=Greenland>Greenland<option value=Grenada>Grenada<option value=Guatemala>Guatemala<option value=Guinea>Guinea<option value=Guinea-Bissau>Guinea-Bissau<option value=Guyana>Guyana<option value="Hong Kong">Hong Kong<option value=Haiti>Haiti<option value="Vatican City">Vatican City<option value=Honduras>Honduras<option value=Hungary>Hungary<option value=Iceland>Iceland<option value=India>India<option value=Indonesia>Indonesia<option value=Iran>Iran<option value=Iraq>Iraq<option value="Ireland (Republic)">Ireland (Republic)<option value=Israel>Israel<option value=Italy>Italy<option value=Jamaica>Jamaica<option value=Japan>Japan<option value=Jordan>Jordan<option value=Kazakhstan>Kazakhstan<option value=Kenya>Kenya<option value=Kiribati>Kiribati<option value="Korea North">Korea North<option value="South Korea">South Korea<option value=Kosovo>Kosovo<option value=Kuwait>Kuwait<option value=Kyrgyzstan>Kyrgyzstan<option value=Laos>Laos<option value=Latvia>Latvia<option value=Lebanon>Lebanon<option value=Lesotho>Lesotho<option value=Liberia>Liberia<option value=Libya>Libya<option value=Liechtenstein>Liechtenstein<option value=Lithuania>Lithuania<option value=Luxembourg>Luxembourg<option value=Macedonia>Macedonia<option value=Madagascar>Madagascar<option value=Malawi>Malawi<option value=Malaysia>Malaysia<option value=Maldives>Maldives<option value=Mali>Mali<option value=Malta>Malta<option value="Marshall Islands">Marshall Islands<option value=Mauritania>Mauritania<option value=Mauritius>Mauritius<option value=Mexico>Mexico<option value=Micronesia>Micronesia<option value=Moldova>Moldova<option value=Monaco>Monaco<option value=Mongolia>Mongolia<option value=Montenegro>Montenegro<option value=Morocco>Morocco<option value=Mozambique>Mozambique<option value="Myanmar, Burma">Myanmar, Burma<option value=Namibia>Namibia<option value=Nauru>Nauru<option value=Nepal>Nepal<option value=Netherlands>Netherlands<option value="Netherlands Antilles">Netherlands Antilles<option value="New Zealand">New Zealand<option value=Nicaragua>Nicaragua<option value=Niger>Niger<option value=Nigeria>Nigeria<option value=Norway>Norway<option value=Oman>Oman<option value=Pakistan>Pakistan<option value=Palau>Palau<option value="West Bank / Palestinian Territory">West Bank / Palestinian Territory<option value=Panama>Panama<option value="Papua New Guinea">Papua New Guinea<option value=Paraguay>Paraguay<option value=Peru>Peru<option value=Philippines>Philippines<option value=Pitcairn>Pitcairn<option value=Poland>Poland<option value=Portugal>Portugal<option value="Puerto Rico">Puerto Rico<option value=Qatar>Qatar<option value=Romania>Romania<option value="Russian Federation">Russian Federation<option value=Rwanda>Rwanda<option value="St Kitts & Nevis">St Kitts & Nevis<option value="St Lucia">St Lucia<option value="Saint Martin">Saint Martin<option value=Samoa>Samoa<option value="San Marino">San Marino<option value="Sao Tome & Principe">Sao Tome & Principe<option value="Saudi Arabia">Saudi Arabia<option value=Senegal>Senegal<option value=Serbia>Serbia<option value=Seychelles>Seychelles<option value="Sierra Leone">Sierra Leone<option value=Singapore>Singapore<option value=Slovakia>Slovakia<option value=Slovenia>Slovenia<option value="Solomon Islands">Solomon Islands<option value=Somalia>Somalia<option value="South Africa">South Africa<option value=Spain>Spain<option value="Sri Lanka">Sri Lanka<option value=Sudan>Sudan<option value="South Sudan">South Sudan<option value=Suriname>Suriname<option value=Swaziland>Swaziland<option value=Sweden>Sweden<option value=Switzerland>Switzerland<option value=Syria>Syria<option value=Taiwan>Taiwan<option value=Tajikistan>Tajikistan<option value=Tanzania>Tanzania<option value=Thailand>Thailand<option value="East Timor">East Timor<option value=Togo>Togo<option value=Tonga>Tonga<option value="Trinidad & Tobago">Trinidad & Tobago<option value=Tunisia>Tunisia<option value=Turkey>Turkey<option value=Turkmenistan>Turkmenistan<option value=Tuvalu>Tuvalu<option value=Uganda>Uganda<option value=Ukraine>Ukraine<option value="United Arab Emirates">United Arab Emirates<option value="United Kingdom">United Kingdom<option value="United States">United States<option value=Uruguay>Uruguay<option value=Uzbekistan>Uzbekistan<option value=Vanuatu>Vanuatu<option value=Venezuela>Venezuela<option value=Vietnam>Vietnam<option value=Yemen>Yemen<option value=Zambia>Zambia<option value=Zimbabwe>Zimbabwe</select><p><label class=youpasswd for=phonenumber datas-icon=fa-phone>Phone Number</label><input name=phonenumber type="number" placeholder="Please enter Phone Number with Country code"value="<?php echo $user_data['phonenumber']; ?>"></p><label class=sex for=sex>Add/Change your Gender</label>     <select id=sex name=sex style="border:1px solid rgba(91,90,90,.7);border-radius:5px;box-shadow:0 1px 4px 0 rgba(168,168,168,.6) inset;height:30px"><option value=Unspecified selected><?php echo $user_data['sex']; ?><option value=Male>Male<option value=Female>Female</select><p><input name=allow_email type="checkbox"<?php if ($user_data['allow_email'] == 1) { echo 'checked="checked"'; } ?>> Would you like to recieve emails from us?<p class="buttons recover"><input value="Update Profile"type=submit></form><?php } ?>